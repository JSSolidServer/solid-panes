#  Form to record episodes in a life f a person
#
#

@prefix : <#> .

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix owl: <http://www.w3.org/2002/07/owl#>.
@prefix schema: <http://schema.org/>.
@prefix solid: <http://www.w3.org/ns/solid/terms#>.
@prefix ui: <http://www.w3.org/ns/ui#>.
@prefix vcard: <http://www.w3.org/2006/vcard/ns#>.
@prefix : <#>.


## Example:
<> :example {
<https://ruben.verborgh.org/resume/#mit-2018> a <http://schema.org/Role>, <http://schema.org/OrganizationRole>, <http://schema.org/EmployeeRole>, <http://purl.org/vocab/bio/0.1/Event>, <http://purl.org/vocab/bio/0.1/Employment>;
    <http://schema.org/name> "Research Affiliate"@en;
    <http://schema.org/roleName> "Research Affiliate"@en;
    <http://www.w3.org/2000/01/rdf-schema#label> "Research Affiliate"@en.
<http://dbpedia.org/resource/Massachusetts_Institute_of_Technology> a <http://schema.org/Organization>.
<https://ruben.verborgh.org/resume/#mit-2018> <http://purl.org/vocab/bio/0.1/employer> <http://dbpedia.org/resource/Massachusetts_Institute_of_Technology>.
<http://dbpedia.org/resource/Massachusetts_Institute_of_Technology> <http://xmlns.com/foaf/0.1/homepage> <https://www.mit.edu/>;
    <http://schema.org/name> "Massachusetts Institute of Technology"@en;
    <http://www.w3.org/2000/01/rdf-schema#label> "Massachusetts Institute of Technology"@en.
_:b3 a <http://www.w3.org/2006/time#ProperInterval>.
<https://ruben.verborgh.org/resume/#mit-2018> <http://purl.org/vocab/bio/0.1/eventInterval> _:b3.
_:b4 a <http://www.w3.org/2006/time#Instant>.
_:b3 <http://www.w3.org/2006/time#hasBeginning> _:b4.
_:b4 <http://www.w3.org/2006/time#inXSDDate> "2018-02-01"^^<http://www.w3.org/2001/XMLSchema#date>.
<https://ruben.verborgh.org/resume/#mit-2018> <http://schema.org/startDate> "2018-02-01"^^<http://www.w3.org/2001/XMLSchema#date>.

} .


:RoleForm a ui:Form; schema:name "Form for editing a role" ;
  ui:parts ( :roleTypeField :roleNameField :wikidatOrganizationField :startDateField :endDateField ) . # @@ add: commentField?

  :OrganinizationForm a ui:Form; schema:name "Form for editing a role" ;
    ui:parts ( :roleNameField :instituteNameField :hopePageURIField ) .

  :startDateField
      a ui:DateField ;
      ui:label "start date";
      ui:property schema:startDate .

  :endDateField
        a ui:DateField ;
        ui:label "end date";
        ui:property schema:startDate .

  :roleNameField
      a ui:SingleLineTextField ;
      ui:label "Role";
      ui:maxLength "80" ;
      ui:property schema:roleName ;
      ui:size "20" .

  :roleTypeField
      a ui:AutocompleteField ;
      ui:label "occupation";
    #  ui:maxLength "80" ;
      ui:nameSearchTemplate """https://ec.europa.eu/esco/api/search?language=$(language)&type=occupation&text=$(name)""" ;
      ui:property solid:occupation ;
      ui:labelProperty rdfs:label; # @@ New - please label the object too
      ui:size "80" .

  :wikidatOrganizationField
      a ui:AutocompleteField ;
      ui:label "organization"; # @@ get label from WD?
      ui:maxLength "80" ;
      ui:fromClass wd:@@;
      ui:endPoint <https://query.wikidata.org/sparql>;
      ui:queryTemplate """SELECT *
          WHERE
          { ?klass wdt:P279* $(class) .
            ?subject wdt:P31 ?klass .
            ?subject rdfs:label ?name.
            FILTER regex(?name, "$(name)", "i")
          } LIMIT $(limit) """;
      ui:property solid:employer ;
      ui:labelProperty rdfs:label; # @@ New - please label the object too
      ui:size "80" .

  :OrganinizationField # @@  This is one which needs to be an autocomplete
      a ui:Choice ;
      ui:from schema:Organization; # but check in contacts for vcard:Organization maybe
      ui:mintNew true; ui:use :OrganinizationForm;
      ui:label "Intitute involved";
      ui:property schema:member ;
      ui:inverse true .


  :instituteNameField
      a ui:SingleLineTextField ;
      ui:label "Intitute Name";
      ui:maxLength "200" ;
      ui:property schema:name ;
      ui:size "80" .

   :institteHomePage a ui:NamedNodeURIField ;
     ui:size "80";
     ui:property  schema:url . # @@ ??

    :initituteTypeField a ui:Classifier;
    ui:label "What sort of organization";
    ui:category :InterestingOrganization .


# ends
